# ... inside the API_RESPONSE block ...
                result = self._evaluate_condition(rule, self.current_context, prev_rule_id, context_rule, rule)
                
                # 游릭 ADD THIS BLOCK 游릭
                if result: # If Condition is TRUE (e.g. It is Pending)
                    # Check if we need to send a template and stop
                    if rule.get('rule_action') == 'TEMPLATE_RESPONSE':
                        print("               游꿢 Action is TEMPLATE_RESPONSE -> Sending Message")
                        template_data = self._get_response_template(rule['rule_context'])
                        
                        # Return the template format that stops the flow
                        return {
                            "status": "SUCCESS",
                            "message": template_data['message_content'],
                            "response": template_data['message_content'],
                            "rule_id": rule['rule_id']
                        }
                # 游릭 END NEW BLOCK 游릭
                
                if result:
                     # ... existing logic that looks for rule_next_step ...



elif operator == 'NOT_EQUALS' or operator == 'NOT EQUALS':
                # --- NEW LOGIC START ---
                print(f"               DEBUG Check: Actual='{actual_value}' vs Expected='{expected_value}'")
                
                # 1. Safety Check: If actual value is False, None, Empty, OR '0' (Failed Extraction), 
                # it is a NORMAL order. Do NOT trigger the rule.
                str_val = str(actual_value).lower().strip()
                if actual_value is None or str_val in ['false', 'none', '', 'null', '0']:
                    print("               DEBUG Result: Value is Empty/False/0 -> Rule Ignored (Success)")
                    return False
                
                # 2. Logic Check: If we have a value (e.g. 'Pending'), 
                # trigger ONLY if it is different from expected ('A').
                is_different = str_val != str(expected_value).lower().strip()
                print(f"               DEBUG Result: Is Different? {is_different}")
                return is_different
                # --- NEW LOGIC END ---
