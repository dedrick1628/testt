# ... existing code ...
headers = json.loads(api_config.get('api_headers'))
print("Current rules ===>", rule['rule_id'])

# ==================================================================================
# üõ†Ô∏è TESTING ONLY: MOCK DATA INJECTION
# This block injects the specific JSON you provided so you can test the Loop Logic
# without depending on the real Get Order API response.
# ==================================================================================
if 'Reflow' in api_name or 'Submit_Order' in api_name:
    print("üß™ INJECTING MOCK DATA FOR TESTING...")
    mock_data = {
        "orderNo": None,
        "locationCode": None,
        "mtn": None,
        "orderType": None,
        "orderDetails": None,
        "activationDetailsList": [
            {
                "mtn": "4029608762",
                "currentPlan": "LLP",
                "deplType": "L",
                "postInLine": "false",
                "multiLineSeqNo": "1",
                "lineActionType": "BYOD",
                "activationStatus": "SUCCESS DVS 375709336 acct 590205097-00001 (11/16/2025-13:23:51)",
                "aceOrdStatus": "CO",
                "aceOrdSaleType": "S",
                "aceOrdCrdAppNum": "601867687",
                "activationRequest": "2025-11-16 13:31:59.0000006",
                "powerOnActivationRequired": "false",
                "activationTime": None,
                "dvsError": None,
                "dvsErrorTimeStamp": None,
                "dvsSuccessMsg": "375709336",
                "dvsSuccessTimestamp": "2025-11-16T18:23:51.491526Z",
                "setUpLater": "false"
            },
            {
                "mtn": "4029905316",
                "currentPlan": "LLP",
                "deplType": "NA",
                "postInLine": "false",
                "multiLineSeqNo": "4",
                "lineActionType": "FEA",
                "activationStatus": "SUCCESS DVS 375709336 acct 590205097-00001 (11/16/2025-13:23:51)",
                "aceOrdStatus": "CO",
                "aceOrdSaleType": "S",
                "aceOrdCrdAppNum": "601867687",
                "activationRequest": "2025-11-16 13:31:59.0000007",
                "powerOnActivationRequired": "false",
                "activationTime": None,
                "dvsError": None,
                "dvsErrorTimeStamp": None,
                "dvsSuccessMsg": "375709336",
                "dvsSuccessTimestamp": "2025-11-16T18:23:51.491526Z",
                "setUpLater": "false"
            },
            {
                "mtn": "4026573252",
                "currentPlan": "LLP",
                "deplType": "NA",
                "postInLine": "false",
                "multiLineSeqNo": "3",
                "lineActionType": "FEA",
                "activationStatus": "SUCCESS DVS 375709336 acct 590205097-00001 (11/16/2025-13:23:51)",
                "aceOrdStatus": "CO",
                "aceOrdSaleType": "S",
                "aceOrdCrdAppNum": "601867687",
                "activationRequest": "2025-11-16 13:31:59.0000009",
                "powerOnActivationRequired": "false",
                "activationTime": None,
                "dvsError": None,
                "dvsErrorTimeStamp": None,
                "dvsSuccessMsg": "375709336",
                "dvsSuccessTimestamp": "2025-11-16T18:23:51.491526Z",
                "setUpLater": "false"
            },
            {
                "mtn": "4023069459",
                "currentPlan": "LLP",
                "deplType": "NA",
                "postInLine": "false",
                "multiLineSeqNo": "2",
                "lineActionType": "FEA",
                "activationStatus": "SUCCESS DVS 375709336 acct 590205097-00001 (11/16/2025-13:23:51)",
                "aceOrdStatus": "CO",
                "aceOrdSaleType": "S",
                "aceOrdCrdAppNum": "601867687",
                "activationRequest": "2025-11-16 13:31:59.0000009",
                "powerOnActivationRequired": "false",
                "activationTime": None,
                "dvsError": None,
                "dvsErrorTimeStamp": None,
                "dvsSuccessMsg": "375709336",
                "dvsSuccessTimestamp": "2025-11-16T18:23:51.491526Z",
                "setUpLater": "false"
            }
        ]
    }
    # Inject directly into context so find_key_recursively will find THIS instead of real API data
    context['activationDetailsList'] = mock_data['activationDetailsList']
# ==================================================================================


# --- STEP 1: Determine items to process (Looping Logic) ---
items_to_process = []

# ... rest of your code ...
