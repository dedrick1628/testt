def _execute_api_call_step (self, intent_type, rule: Dict[str, Any], context: Dict[str, Any]) -> Dict[str, Any]:
        api_config = self._get_api_configuration(rule['rule_id'])
        if not api_config:
            print(f"         ‚ùå No API configuration found for rule_id: {rule['rule_id']}")
            self._log_execution_step(rule, 'API_CONFIG_LOOKUP', {'rule_id': rule['rule_id']}, None, "No config found", "ERROR", "FAILED")
            return self._create_response("ERROR", f"No API configuration found", rule['rule_id'])

        print("Inside execute api call step method", api_config)
        print(f"         üåê URL: {api_config['api_url']}")
        print(f"         üì° Method: {api_config['http_method']}")

        # Log API call start
        self._log_execution_step(rule, 'API_CALL_START', {'api_url': api_config['api_url']}, None, None, "INFO", "STARTED")

        print(f"         üöÄ Making API call...")
        result = self._call_configured_api(api_config, context, rule)

        # üî¥ CRITICAL FIX: Handle ERROR status explicitly and RETURN immediately
        if result and result.get('status') == 'ERROR':
             print(f"         ‚ùå API call logic returned ERROR: {result.get('message')}")
             self._log_execution_step(
                rule, 'API_CALL_LOGIC_ERROR',
                {'api_url': api_config['api_url']},
                result,
                result.get('message'),
                "ERROR", "FAILED"
            )
             return result  # <--- MUST RETURN HERE TO STOP FLOW

        # Handle SUCCESS
        elif result and result.get('status') == 'SUCCESS':
            print(f"         ‚úÖ API call completed successfully", rule)
            return result

        # Handle FAILURE/EMPTY
        else:
            self._log_execution_step(rule, 'API_CALL_FAILED', {'api_url': api_config['api_url']}, None, "No data", "ERROR", "FAILED")
            print(f"         ‚ö†Ô∏è  API call completed but returned no data or failed")
            return self._create_response("INFO", "API call completed but returned no data", rule['rule_id'])


def _execute_rule(self, intent_type, rule_type: str, context: Dict[str, Any], rule: Dict[str, Any], prev_rule_id:str,rule_context:str) -> Dict[str, Any]:
        
        # ... (keep existing setup code) ...
        condition_config = { ... } # existing code

        try:
            if rule_type == 'API_CALL':
               result = self._execute_api_call_step(intent_type,rule,context)
               
               # üî¥ FIX: If it is SUCCESS, try to continue. 
               if result['status'] == 'SUCCESS':
                  if rule['rule_action'] == 'CONTINUE' and rule['rule_next_step']:
                     next_rule = self._find_rule_by_intent_and_rule_id(intent_type,rule['rule_next_step'])
                     if next_rule:
                        # Recursive call
                        return self._execute_rule(intent_type,next_rule['rule_type'], context,next_rule,next_rule['rule_next_step'],next_rule['rule_context'])
                  return result
               
               # üî¥ FIX: If it is ERROR, return it immediately so the main process stops!
               else:
                  return result

            elif rule_type == 'API_RESPONSE':
                # ... (keep existing API_RESPONSE logic) ...
