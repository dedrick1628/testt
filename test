# ... inside _call_configured_api ...

            if is_multi_mtn_api:
                # ... (Existing matching logic) ...
                
                # [EXISTING LOOP]
                if activationDetailsList and isinstance(activationDetailsList, list):
                    if user_mtn_list and len(user_mtn_list) > 0:
                        for user_mtn in user_mtn_list:
                             # ... match logic ...
                             if match:
                                items_to_process.append(match)
                             else:
                                print(f"         ‚ö†Ô∏è No detail found for MTN: {user_mtn} - Skipping")

                # üî¥ NEW CODE: ADD THIS CHECK IMMEDIATELY AFTER THE MATCHING LOOP
                if len(items_to_process) == 0:
                    print("         ‚ùå No matching MTNs found in backend/mock data.")
                    # Return a failure response to stop the flow
                    return self._create_response(
                        "ERROR", 
                        "No valid MTNs found to process. Please check your input.", 
                        rule['rule_id']
                    )

            else:
                # For all other APIs (Get Order, Cancel, etc.), run once
                items_to_process.append(None)
