(venv) PS C:\Users\salude7\Documents\store-automation-slack_server_nonprod> fastapi run .\server.py

   FastAPI   Starting production server ðŸš€

             Searching for package file structure from directories with __init__.py files
             Importing from C:\Users\salude7\Documents\store-automation-slack_server_nonprod

    module   ðŸ server.py

      code   Importing the FastAPI app object from the module with the following code:

             from server import server

       app   Using import string: server:server

    server   Server started at http://0.0.0.0:8000
    server   Documentation at http://0.0.0.0:8000/docs

             Logs:

      INFO   Started server process [110764]
      INFO   Waiting for application startup.
      INFO   Application startup complete.
      INFO   Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
      INFO   127.0.0.1:52310 - "GET /gettransactions HTTP/1.1" 404
Database connection established successfully.
context is

ðŸš€ STARTING ORDER PROCESSING
============================================================
ðŸ“¦ Order Number: 1051684
ðŸ“ Location Code: 1822101
ðŸ“‹ Order Type: ACTIVATION
ðŸ‘¤ User:
ðŸ†” Session ID: SS_20251216_091246_ecf0145e
------------------------------------------------------------
ðŸ” Step 1: Calling problem finder... 1051684   1822101
ðŸ” Step 1: Finding matching rule for order type11
rulerulerulerule ===> {'rule_id': 'RULE_200', 'rule_name': 'Get order info', 'rule_step_number': 1, 'JSON_PATH_VALUE': 'response.status_code', 'operator': 'EQUALS', 'expected_value': '200', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_236', 'rule_type': 'API_CALL', 'rule_context': None}
         ðŸš€ Running test mock data function...
rule_typerule_type ==> {'rule_id': 'RULE_200', 'rule_name': 'Get order info', 'rule_step_number': 1, 'JSON_PATH_VALUE': 'response.status_code', 'operator': 'EQUALS', 'expected_value': '200', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_236', 'rule_type': 'API_CALL', 'rule_context': None}
ðŸ”¥ EXECUTING RULE: API_CALL with context: None
Inside execute api call step method {'conf_id': 'CONF_109', 'rule_id': 'RULE_200', 'api_url': 'https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details', 'http_method': 'POST', 'api_headers': '{"Content-Type": "application/json"}', 'timeout_seconds': 30, 'request_body': '{"orderNo": "{order_number}", "locationCode": "{location_code}"}\t', 'api_name': 'Get Order API'}
         ðŸŒ URL: https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details
         ðŸ“¡ Method: POST

ðŸ” --- STARTING DATA EXTRACTION (Rule: Get order info) ---
ðŸ” --- DATA EXTRACTION FINISHED ---

ðŸ§ª FINAL VALUES TO INSERT:
   CHANNEL_ID:        ''
   ACTIVATION_STATUS: ''
   SOURCE_TYPE_CODE:  ''
   SOURCE_TYPE_VAL:   ''
------------------------------
ðŸ“ LOGGED: API_CALL_START for Get order info (Session: SS_20251216_091246_ecf0145e)
         ðŸš€ Making API call...
Current rules ===> RULE_200
for loop https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details
else
         ðŸš€ Making API call (1/1)... URL: https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details
API DATA ==> {'orderNo': None, 'locationCode': None, 'mtn': None, 'orderType': None, 'orderDetails': {'customerId': '0770961810', 'orderLocationCode': '1822101', 'orderCreditAppNumber': '563202344', 'masterOrderNo': '10000210738984', 'mtn': '5209717631', 'nsaStackId': 'OM', 'activationStatus': 'Failure', 'cartId': '49dd8006-9840-489d-80d2-1035c7f394f1', 'comboOrder': '569202349', 'paymentStatus': 'Success', 'caseId': 'SOP-1086922738-W01', 'aceOrderType': 'Purchase Service(PS)', 'aceOrderStatus': 'Completed(CO)', 'accountNo': '1', 'preOrder': '0', 'loanNumber': '1469307558', 'visionOrder': None, 'aceOrderNumber': '1051684', 'aceOrderCompletionTime': '23-11-2025 16:35:29', 'aceOrderCustomerType': 'Upgrade Customer(U)', 'broadBandType': None, 'billRegion': 'VW', 'shipmentStatus': 'Completed', 'byod': 'False', 'aceOrderSaleType': 'Purchase(P)', 'channel': 'NETACE', 'orderSaveTime': '23-11-2025 16:32:52', 'shipmentType': 'LOCAL', 'ecpdProfileId': None, 'tradeInDeviceId': None, 'trunkMtn': None, 'tradeInDescription': None, 'portIn': None, 'clnrStatus': None, 'shipmentMethod': None, 'fraudStatus': 'Success', 'creditStatus': None, 'pendingOrder': False, 'visionOrderStatus': None, 'cassandraOrderStatus': None, 'cidbStatus': None, 'visionStatus': 'C, TC', 'cassandraStatus': None}, 'activationDetailsList': None, 'switchDetailsList': None, 'pendingOrders': None, 'status': None, 'statusMessage': None, 'errorMessage': None, 'simotaDetailsList': None, 'esimTransactionsList': None}
FORCING PORT-IN = TRUE FOR TESTING
response ==> RULE_200
         âœ… API call completed successfully {'rule_id': 'RULE_200', 'rule_name': 'Get order info', 'rule_step_number': 1, 'JSON_PATH_VALUE': 'response.status_code', 'operator': 'EQUALS', 'expected_value': '200', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_236', 'rule_type': 'API_CALL', 'rule_context': None}
Next scenario rule {'rule_id': 'RULE_236', 'rule_name': 'get-correction-order-details-success', 'rule_step_number': 36, 'JSON_PATH_VALUE': 'orderDetails', 'operator': 'EQUALS', 'expected_value': '1', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_206', 'rule_type': 'API_RESPONSE', 'rule_context': 'RULE_200', 'intent_type': 'ACTIVATION'}
field_pathfield_path ===> orderDetails
                  ðŸ” Searching for field: orderDetails
                  ðŸ” Checking API result11: api_result_RULE_200
                  ðŸ” Value: {'rule_name': 'Get order info', 'response_data': {'orderNo': None, 'locationCode': None, 'mtn': None, 'orderType': None, 'orderDetails': {'customerId': '0770961810', 'orderLocationCode': '1822101', 'orderCreditAppNumber': '563202344', 'masterOrderNo': '10000210738984', 'mtn': '5209717631', 'nsaStackId': 'OM', 'activationStatus': 'Failure', 'cartId': '49dd8006-9840-489d-80d2-1035c7f394f1', 'comboOrder': '569202349', 'paymentStatus': 'Success', 'caseId': 'SOP-1086922738-W01', 'aceOrderType': 'Purchase Service(PS)', 'aceOrderStatus': 'Completed(CO)', 'accountNo': '1', 'preOrder': '0', 'loanNumber': '1469307558', 'visionOrder': None, 'aceOrderNumber': '1051684', 'aceOrderCompletionTime': '23-11-2025 16:35:29', 'aceOrderCustomerType': 'Upgrade Customer(U)', 'broadBandType': None, 'billRegion': 'VW', 'shipmentStatus': 'Completed', 'byod': 'False', 'aceOrderSaleType': 'Purchase(P)', 'channel': 'NETACE', 'orderSaveTime': '23-11-2025 16:32:52', 'shipmentType': 'LOCAL', 'ecpdProfileId': None, 'tradeInDeviceId': None, 'trunkMtn': None, 'tradeInDescription': None, 'portIn': 'False', 'clnrStatus': None, 'shipmentMethod': None, 'fraudStatus': 'Success', 'creditStatus': None, 'pendingOrder': False, 'visionOrderStatus': None, 'cassandraOrderStatus': None, 'cidbStatus': None, 'visionStatus': 'C, TC', 'cassandraStatus': None}, 'activationDetailsList': None, 'switchDetailsList': None, 'pendingOrders': None, 'status': None, 'statusMessage': None, 'errorMessage': None, 'simotaDetailsList': None, 'esimTransactionsList': None}, 'status_code': 200}
                  ðŸ” Value111: {'customerId': '0770961810', 'orderLocationCode': '1822101', 'orderCreditAppNumber': '563202344', 'masterOrderNo': '10000210738984', 'mtn': '5209717631', 'nsaStackId': 'OM', 'activationStatus': 'Failure', 'cartId': '49dd8006-9840-489d-80d2-1035c7f394f1', 'comboOrder': '569202349', 'paymentStatus': 'Success', 'caseId': 'SOP-1086922738-W01', 'aceOrderType': 'Purchase Service(PS)', 'aceOrderStatus': 'Completed(CO)', 'accountNo': '1', 'preOrder': '0', 'loanNumber': '1469307558', 'visionOrder': None, 'aceOrderNumber': '1051684', 'aceOrderCompletionTime': '23-11-2025 16:35:29', 'aceOrderCustomerType': 'Upgrade Customer(U)', 'broadBandType': None, 'billRegion': 'VW', 'shipmentStatus': 'Completed', 'byod': 'False', 'aceOrderSaleType': 'Purchase(P)', 'channel': 'NETACE', 'orderSaveTime': '23-11-2025 16:32:52', 'shipmentType': 'LOCAL', 'ecpdProfileId': None, 'tradeInDeviceId': None, 'trunkMtn': None, 'tradeInDescription': None, 'portIn': 'False', 'clnrStatus': None, 'shipmentMethod': None, 'fraudStatus': 'Success', 'creditStatus': None, 'pendingOrder': False, 'visionOrderStatus': None, 'cassandraOrderStatus': None, 'cidbStatus': None, 'visionStatus': 'C, TC', 'cassandraStatus': None}
            ðŸ” Condition Details:
               Field Path: orderDetails
               Operator: EQUALS
               Actual Value: '1'
               Expected Value: '1'
         âœ… Condition met for rule: get-correction-order-details-success
Next scenario rule {'rule_id': 'RULE_206', 'rule_name': 'b2b-customer-check', 'rule_step_number': 6, 'JSON_PATH_VALUE': 'orderDetails{}.billRegion=VB', 'operator': 'EQUALS', 'expected_value': 'True', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_300', 'rule_type': 'API_RESPONSE', 'rule_context': 'RULE_200', 'intent_type': 'ACTIVATION'}
field_pathfield_path ===> orderDetails{}.billRegion=VB
            ðŸ” Condition Details:
               Field Path: orderDetails{}.billRegion=VB
               Operator: EQUALS
               Actual Value: 'False'
               Expected Value: 'True'
         âŒ Condition not met for rule: b2b-customer-check
Finding failure case for22
Finding failure case for  orderDetails{}.billRegion=VB ACTIVATION EQUALS
field_pathfield_path ===> orderDetails{}.portIn
                  ðŸ” Searching for field: orderDetails{}.portIn
                  âŒ Data not found in any API response, treating as length 0
            ðŸ” Condition Details:
               Field Path: orderDetails{}.portIn
               Operator: NOT_EQUALS
               Actual Value: '0'
               Expected Value: 'A'
               DEBUG Check: Actual='0' vs Expected='A'
               DEBUG Result: Is Different? True
         âœ… Condition met for rule: portin-check
ðŸŽ¯ RULE EXECUTION RESULT:
   Result: None
   Status: NO_RESULT
   Message: NO_MESSAGE

ðŸŽ¯ PROCESSING COMPLETE
Status: NO_RESULT
============================================================

ðŸ” --- STARTING DATA EXTRACTION (Rule: Get order info) ---
   ðŸ“‚ Analyzing Context Key: api_result_RULE_200
      âœ… Found 'orderDetails' dictionary.
         -> Raw 'channel' found: 'NETACE'
         -> Raw 'activationStatus' found: 'Failure'
         ðŸŽ¯ CAPTURED CHANNEL_ID: NETACE
         ðŸŽ¯ CAPTURED ACTIVATION_STATUS: Failure
ðŸ” --- DATA EXTRACTION FINISHED ---

ðŸ§ª FINAL VALUES TO INSERT:
   CHANNEL_ID:        'NETACE'
   ACTIVATION_STATUS: 'Failure'
   SOURCE_TYPE_CODE:  ''
   SOURCE_TYPE_VAL:   ''
------------------------------
ðŸ“ LOGGED: PROCESS_COMPLETE for Get order info (Session: SS_20251216_091246_ecf0145e)
response ==> Dear User, Order processing failed. Please check your order details and try again. If the issue persists, contact customer support.
      INFO   127.0.0.1:52312 - "POST /api/v1/activation HTTP/1.1" 200
      INFO   127.0.0.1:49671 - "GET /gettransactions HTTP/1.1" 404
      INFO   127.0.0.1:58510 - "GET /gettransactions HTTP/1.1" 404
      INFO   Shutting down
      INFO   Waiting for application shutdown.
      INFO   Application shutdown complete.
      INFO   Finished server process [110764]

(venv) PS C:\Users\salude7\Documents\store-automation-slack_server_nonprod> fastapi run .\server.py

   FastAPI   Starting production server ðŸš€

             Searching for package file structure from directories with __init__.py files
             Importing from C:\Users\salude7\Documents\store-automation-slack_server_nonprod

    module   ðŸ server.py

      code   Importing the FastAPI app object from the module with the following code:

             from server import server

       app   Using import string: server:server

    server   Server started at http://0.0.0.0:8000
    server   Documentation at http://0.0.0.0:8000/docs

             Logs:

      INFO   Started server process [101976]
      INFO   Waiting for application startup.
      INFO   Application startup complete.
      INFO   Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
Database connection established successfully.
context is

ðŸš€ STARTING ORDER PROCESSING
============================================================
ðŸ“¦ Order Number: 1051684
ðŸ“ Location Code: 1822101
ðŸ“‹ Order Type: ACTIVATION
ðŸ‘¤ User:
ðŸ†” Session ID: SS_20251216_091506_aebc343c
------------------------------------------------------------
ðŸ” Step 1: Calling problem finder... 1051684   1822101
ðŸ” Step 1: Finding matching rule for order type11
rulerulerulerule ===> {'rule_id': 'RULE_200', 'rule_name': 'Get order info', 'rule_step_number': 1, 'JSON_PATH_VALUE': 'response.status_code', 'operator': 'EQUALS', 'expected_value': '200', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_236', 'rule_type': 'API_CALL', 'rule_context': None}
         ðŸš€ Running test mock data function...
rule_typerule_type ==> {'rule_id': 'RULE_200', 'rule_name': 'Get order info', 'rule_step_number': 1, 'JSON_PATH_VALUE': 'response.status_code', 'operator': 'EQUALS', 'expected_value': '200', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_236', 'rule_type': 'API_CALL', 'rule_context': None}
ðŸ”¥ EXECUTING RULE: API_CALL with context: None
Inside execute api call step method {'conf_id': 'CONF_109', 'rule_id': 'RULE_200', 'api_url': 'https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details', 'http_method': 'POST', 'api_headers': '{"Content-Type": "application/json"}', 'timeout_seconds': 30, 'request_body': '{"orderNo": "{order_number}", "locationCode": "{location_code}"}\t', 'api_name': 'Get Order API'}
         ðŸŒ URL: https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details
         ðŸ“¡ Method: POST

ðŸ” --- STARTING DATA EXTRACTION (Rule: Get order info) ---
ðŸ” --- DATA EXTRACTION FINISHED ---

ðŸ§ª FINAL VALUES TO INSERT:
   CHANNEL_ID:        ''
   ACTIVATION_STATUS: ''
   SOURCE_TYPE_CODE:  ''
   SOURCE_TYPE_VAL:   ''
------------------------------
ðŸ“ LOGGED: API_CALL_START for Get order info (Session: SS_20251216_091506_aebc343c)
         ðŸš€ Making API call...
Current rules ===> RULE_200
for loop https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details
else
         ðŸš€ Making API call (1/1)... URL: https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details
API DATA ==> {'orderNo': None, 'locationCode': None, 'mtn': None, 'orderType': None, 'orderDetails': {'customerId': '0770961810', 'orderLocationCode': '1822101', 'orderCreditAppNumber': '563202344', 'masterOrderNo': '10000210738984', 'mtn': '5209717631', 'nsaStackId': 'OM', 'activationStatus': 'Failure', 'cartId': '49dd8006-9840-489d-80d2-1035c7f394f1', 'comboOrder': '569202349', 'paymentStatus': 'Success', 'caseId': 'SOP-1086922738-W01', 'aceOrderType': 'Purchase Service(PS)', 'aceOrderStatus': 'Completed(CO)', 'accountNo': '1', 'preOrder': '0', 'loanNumber': '1469307558', 'visionOrder': None, 'aceOrderNumber': '1051684', 'aceOrderCompletionTime': '23-11-2025 16:35:29', 'aceOrderCustomerType': 'Upgrade Customer(U)', 'broadBandType': None, 'billRegion': 'VW', 'shipmentStatus': 'Completed', 'byod': 'False', 'aceOrderSaleType': 'Purchase(P)', 'channel': 'NETACE', 'orderSaveTime': '23-11-2025 16:32:52', 'shipmentType': 'LOCAL', 'ecpdProfileId': None, 'tradeInDeviceId': None, 'trunkMtn': None, 'tradeInDescription': None, 'portIn': None, 'clnrStatus': None, 'shipmentMethod': None, 'fraudStatus': 'Success', 'creditStatus': None, 'pendingOrder': False, 'visionOrderStatus': None, 'cassandraOrderStatus': None, 'cidbStatus': None, 'visionStatus': 'C, TC', 'cassandraStatus': None}, 'activationDetailsList': None, 'switchDetailsList': None, 'pendingOrders': None, 'status': None, 'statusMessage': None, 'errorMessage': None, 'simotaDetailsList': None, 'esimTransactionsList': None}
FORCING PORT-IN = TRUE FOR TESTING
response ==> RULE_200
         âœ… API call completed successfully {'rule_id': 'RULE_200', 'rule_name': 'Get order info', 'rule_step_number': 1, 'JSON_PATH_VALUE': 'response.status_code', 'operator': 'EQUALS', 'expected_value': '200', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_236', 'rule_type': 'API_CALL', 'rule_context': None}
Next scenario rule {'rule_id': 'RULE_236', 'rule_name': 'get-correction-order-details-success', 'rule_step_number': 36, 'JSON_PATH_VALUE': 'orderDetails', 'operator': 'EQUALS', 'expected_value': '1', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_206', 'rule_type': 'API_RESPONSE', 'rule_context': 'RULE_200', 'intent_type': 'ACTIVATION'}
field_pathfield_path ===> orderDetails
                  ðŸ” Searching for field: orderDetails
                  ðŸ” Checking API result11: api_result_RULE_200
                  ðŸ” Value: {'rule_name': 'Get order info', 'response_data': {'orderNo': None, 'locationCode': None, 'mtn': None, 'orderType': None, 'orderDetails': {'customerId': '0770961810', 'orderLocationCode': '1822101', 'orderCreditAppNumber': '563202344', 'masterOrderNo': '10000210738984', 'mtn': '5209717631', 'nsaStackId': 'OM', 'activationStatus': 'Failure', 'cartId': '49dd8006-9840-489d-80d2-1035c7f394f1', 'comboOrder': '569202349', 'paymentStatus': 'Success', 'caseId': 'SOP-1086922738-W01', 'aceOrderType': 'Purchase Service(PS)', 'aceOrderStatus': 'Completed(CO)', 'accountNo': '1', 'preOrder': '0', 'loanNumber': '1469307558', 'visionOrder': None, 'aceOrderNumber': '1051684', 'aceOrderCompletionTime': '23-11-2025 16:35:29', 'aceOrderCustomerType': 'Upgrade Customer(U)', 'broadBandType': None, 'billRegion': 'VW', 'shipmentStatus': 'Completed', 'byod': 'False', 'aceOrderSaleType': 'Purchase(P)', 'channel': 'NETACE', 'orderSaveTime': '23-11-2025 16:32:52', 'shipmentType': 'LOCAL', 'ecpdProfileId': None, 'tradeInDeviceId': None, 'trunkMtn': None, 'tradeInDescription': None, 'portIn': 'A', 'clnrStatus': None, 'shipmentMethod': None, 'fraudStatus': 'Success', 'creditStatus': None, 'pendingOrder': False, 'visionOrderStatus': None, 'cassandraOrderStatus': None, 'cidbStatus': None, 'visionStatus': 'C, TC', 'cassandraStatus': None}, 'activationDetailsList': None, 'switchDetailsList': None, 'pendingOrders': None, 'status': None, 'statusMessage': None, 'errorMessage': None, 'simotaDetailsList': None, 'esimTransactionsList': None}, 'status_code': 200}
                  ðŸ” Value111: {'customerId': '0770961810', 'orderLocationCode': '1822101', 'orderCreditAppNumber': '563202344', 'masterOrderNo': '10000210738984', 'mtn': '5209717631', 'nsaStackId': 'OM', 'activationStatus': 'Failure', 'cartId': '49dd8006-9840-489d-80d2-1035c7f394f1', 'comboOrder': '569202349', 'paymentStatus': 'Success', 'caseId': 'SOP-1086922738-W01', 'aceOrderType': 'Purchase Service(PS)', 'aceOrderStatus': 'Completed(CO)', 'accountNo': '1', 'preOrder': '0', 'loanNumber': '1469307558', 'visionOrder': None, 'aceOrderNumber': '1051684', 'aceOrderCompletionTime': '23-11-2025 16:35:29', 'aceOrderCustomerType': 'Upgrade Customer(U)', 'broadBandType': None, 'billRegion': 'VW', 'shipmentStatus': 'Completed', 'byod': 'False', 'aceOrderSaleType': 'Purchase(P)', 'channel': 'NETACE', 'orderSaveTime': '23-11-2025 16:32:52', 'shipmentType': 'LOCAL', 'ecpdProfileId': None, 'tradeInDeviceId': None, 'trunkMtn': None, 'tradeInDescription': None, 'portIn': 'A', 'clnrStatus': None, 'shipmentMethod': None, 'fraudStatus': 'Success', 'creditStatus': None, 'pendingOrder': False, 'visionOrderStatus': None, 'cassandraOrderStatus': None, 'cidbStatus': None, 'visionStatus': 'C, TC', 'cassandraStatus': None}
            ðŸ” Condition Details:
               Field Path: orderDetails
               Operator: EQUALS
               Actual Value: '1'
               Expected Value: '1'
         âœ… Condition met for rule: get-correction-order-details-success
Next scenario rule {'rule_id': 'RULE_206', 'rule_name': 'b2b-customer-check', 'rule_step_number': 6, 'JSON_PATH_VALUE': 'orderDetails{}.billRegion=VB', 'operator': 'EQUALS', 'expected_value': 'True', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_300', 'rule_type': 'API_RESPONSE', 'rule_context': 'RULE_200', 'intent_type': 'ACTIVATION'}
field_pathfield_path ===> orderDetails{}.billRegion=VB
            ðŸ” Condition Details:
               Field Path: orderDetails{}.billRegion=VB
               Operator: EQUALS
               Actual Value: 'False'
               Expected Value: 'True'
         âŒ Condition not met for rule: b2b-customer-check
Finding failure case for22
Finding failure case for  orderDetails{}.billRegion=VB ACTIVATION EQUALS
field_pathfield_path ===> orderDetails{}.portIn
                  ðŸ” Searching for field: orderDetails{}.portIn
                  âŒ Data not found in any API response, treating as length 0
            ðŸ” Condition Details:
               Field Path: orderDetails{}.portIn
               Operator: NOT_EQUALS
               Actual Value: '0'
               Expected Value: 'A'
               DEBUG Check: Actual='0' vs Expected='A'
               DEBUG Result: Is Different? True
         âœ… Condition met for rule: portin-check
ðŸŽ¯ RULE EXECUTION RESULT:
   Result: None
   Status: NO_RESULT
   Message: NO_MESSAGE

ðŸŽ¯ PROCESSING COMPLETE
Status: NO_RESULT
============================================================

ðŸ” --- STARTING DATA EXTRACTION (Rule: Get order info) ---
   ðŸ“‚ Analyzing Context Key: api_result_RULE_200
      âœ… Found 'orderDetails' dictionary.
         -> Raw 'channel' found: 'NETACE'
         -> Raw 'activationStatus' found: 'Failure'
         ðŸŽ¯ CAPTURED CHANNEL_ID: NETACE
         ðŸŽ¯ CAPTURED ACTIVATION_STATUS: Failure
ðŸ” --- DATA EXTRACTION FINISHED ---

ðŸ§ª FINAL VALUES TO INSERT:
   CHANNEL_ID:        'NETACE'
   ACTIVATION_STATUS: 'Failure'
   SOURCE_TYPE_CODE:  ''
   SOURCE_TYPE_VAL:   ''
------------------------------
ðŸ“ LOGGED: PROCESS_COMPLETE for Get order info (Session: SS_20251216_091506_aebc343c)
response ==> Dear User, Order processing failed. Please check your order details and try again. If the issue persists, contact customer support.
      INFO   127.0.0.1:63905 - "POST /api/v1/activation HTTP/1.1" 200
      INFO   Shutting down
      INFO   Waiting for application shutdown.
      INFO   Application shutdown complete.
      INFO   Finished server process [101976]

(venv) PS C:\Users\salude7\Documents\store-automation-slack_server_nonprod> fastapi run .\server.py

   FastAPI   Starting production server ðŸš€

             Searching for package file structure from directories with __init__.py files
             Importing from C:\Users\salude7\Documents\store-automation-slack_server_nonprod

    module   ðŸ server.py

      code   Importing the FastAPI app object from the module with the following code:

             from server import server

       app   Using import string: server:server

    server   Server started at http://0.0.0.0:8000
    server   Documentation at http://0.0.0.0:8000/docs

             Logs:

      INFO   Started server process [104024]
      INFO   Waiting for application startup.
      INFO   Application startup complete.
      INFO   Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
Database connection established successfully.
context is

ðŸš€ STARTING ORDER PROCESSING
============================================================
ðŸ“¦ Order Number: 1051684
ðŸ“ Location Code: 1822101
ðŸ“‹ Order Type: ACTIVATION
ðŸ‘¤ User:
ðŸ†” Session ID: SS_20251216_091542_789455d9
------------------------------------------------------------
ðŸ” Step 1: Calling problem finder... 1051684   1822101
ðŸ” Step 1: Finding matching rule for order type11
rulerulerulerule ===> {'rule_id': 'RULE_200', 'rule_name': 'Get order info', 'rule_step_number': 1, 'JSON_PATH_VALUE': 'response.status_code', 'operator': 'EQUALS', 'expected_value': '200', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_236', 'rule_type': 'API_CALL', 'rule_context': None}
         ðŸš€ Running test mock data function...
rule_typerule_type ==> {'rule_id': 'RULE_200', 'rule_name': 'Get order info', 'rule_step_number': 1, 'JSON_PATH_VALUE': 'response.status_code', 'operator': 'EQUALS', 'expected_value': '200', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_236', 'rule_type': 'API_CALL', 'rule_context': None}
ðŸ”¥ EXECUTING RULE: API_CALL with context: None
Inside execute api call step method {'conf_id': 'CONF_109', 'rule_id': 'RULE_200', 'api_url': 'https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details', 'http_method': 'POST', 'api_headers': '{"Content-Type": "application/json"}', 'timeout_seconds': 30, 'request_body': '{"orderNo": "{order_number}", "locationCode": "{location_code}"}\t', 'api_name': 'Get Order API'}
         ðŸŒ URL: https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details
         ðŸ“¡ Method: POST

ðŸ” --- STARTING DATA EXTRACTION (Rule: Get order info) ---
ðŸ” --- DATA EXTRACTION FINISHED ---

ðŸ§ª FINAL VALUES TO INSERT:
   CHANNEL_ID:        ''
   ACTIVATION_STATUS: ''
   SOURCE_TYPE_CODE:  ''
   SOURCE_TYPE_VAL:   ''
------------------------------
ðŸ“ LOGGED: API_CALL_START for Get order info (Session: SS_20251216_091542_789455d9)
         ðŸš€ Making API call...
Current rules ===> RULE_200
for loop https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details
else
         ðŸš€ Making API call (1/1)... URL: https://order360-jl8v.verizon.com/order360-correction-services/get-correction-order-details
API DATA ==> {'orderNo': None, 'locationCode': None, 'mtn': None, 'orderType': None, 'orderDetails': {'customerId': '0770961810', 'orderLocationCode': '1822101', 'orderCreditAppNumber': '563202344', 'masterOrderNo': '10000210738984', 'mtn': '5209717631', 'nsaStackId': 'OM', 'activationStatus': 'Failure', 'cartId': '49dd8006-9840-489d-80d2-1035c7f394f1', 'comboOrder': '569202349', 'paymentStatus': 'Success', 'caseId': 'SOP-1086922738-W01', 'aceOrderType': 'Purchase Service(PS)', 'aceOrderStatus': 'Completed(CO)', 'accountNo': '1', 'preOrder': '0', 'loanNumber': '1469307558', 'visionOrder': None, 'aceOrderNumber': '1051684', 'aceOrderCompletionTime': '23-11-2025 16:35:29', 'aceOrderCustomerType': 'Upgrade Customer(U)', 'broadBandType': None, 'billRegion': 'VW', 'shipmentStatus': 'Completed', 'byod': 'False', 'aceOrderSaleType': 'Purchase(P)', 'channel': 'NETACE', 'orderSaveTime': '23-11-2025 16:32:52', 'shipmentType': 'LOCAL', 'ecpdProfileId': None, 'tradeInDeviceId': None, 'trunkMtn': None, 'tradeInDescription': None, 'portIn': None, 'clnrStatus': None, 'shipmentMethod': None, 'fraudStatus': 'Success', 'creditStatus': None, 'pendingOrder': False, 'visionOrderStatus': None, 'cassandraOrderStatus': None, 'cidbStatus': None, 'visionStatus': 'C, TC', 'cassandraStatus': None}, 'activationDetailsList': None, 'switchDetailsList': None, 'pendingOrders': None, 'status': None, 'statusMessage': None, 'errorMessage': None, 'simotaDetailsList': None, 'esimTransactionsList': None}
FORCING PORT-IN = TRUE FOR TESTING
response ==> RULE_200
         âœ… API call completed successfully {'rule_id': 'RULE_200', 'rule_name': 'Get order info', 'rule_step_number': 1, 'JSON_PATH_VALUE': 'response.status_code', 'operator': 'EQUALS', 'expected_value': '200', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_236', 'rule_type': 'API_CALL', 'rule_context': None}
Next scenario rule {'rule_id': 'RULE_236', 'rule_name': 'get-correction-order-details-success', 'rule_step_number': 36, 'JSON_PATH_VALUE': 'orderDetails', 'operator': 'EQUALS', 'expected_value': '1', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_206', 'rule_type': 'API_RESPONSE', 'rule_context': 'RULE_200', 'intent_type': 'ACTIVATION'}
field_pathfield_path ===> orderDetails
                  ðŸ” Searching for field: orderDetails
                  ðŸ” Checking API result11: api_result_RULE_200
                  ðŸ” Value: {'rule_name': 'Get order info', 'response_data': {'orderNo': None, 'locationCode': None, 'mtn': None, 'orderType': None, 'orderDetails': {'customerId': '0770961810', 'orderLocationCode': '1822101', 'orderCreditAppNumber': '563202344', 'masterOrderNo': '10000210738984', 'mtn': '5209717631', 'nsaStackId': 'OM', 'activationStatus': 'Failure', 'cartId': '49dd8006-9840-489d-80d2-1035c7f394f1', 'comboOrder': '569202349', 'paymentStatus': 'Success', 'caseId': 'SOP-1086922738-W01', 'aceOrderType': 'Purchase Service(PS)', 'aceOrderStatus': 'Completed(CO)', 'accountNo': '1', 'preOrder': '0', 'loanNumber': '1469307558', 'visionOrder': None, 'aceOrderNumber': '1051684', 'aceOrderCompletionTime': '23-11-2025 16:35:29', 'aceOrderCustomerType': 'Upgrade Customer(U)', 'broadBandType': None, 'billRegion': 'VW', 'shipmentStatus': 'Completed', 'byod': 'False', 'aceOrderSaleType': 'Purchase(P)', 'channel': 'NETACE', 'orderSaveTime': '23-11-2025 16:32:52', 'shipmentType': 'LOCAL', 'ecpdProfileId': None, 'tradeInDeviceId': None, 'trunkMtn': None, 'tradeInDescription': None, 'portIn': 'Pending', 'clnrStatus': None, 'shipmentMethod': None, 'fraudStatus': 'Success', 'creditStatus': None, 'pendingOrder': False, 'visionOrderStatus': None, 'cassandraOrderStatus': None, 'cidbStatus': None, 'visionStatus': 'C, TC', 'cassandraStatus': None}, 'activationDetailsList': None, 'switchDetailsList': None, 'pendingOrders': None, 'status': None, 'statusMessage': None, 'errorMessage': None, 'simotaDetailsList': None, 'esimTransactionsList': None}, 'status_code': 200}
                  ðŸ” Value111: {'customerId': '0770961810', 'orderLocationCode': '1822101', 'orderCreditAppNumber': '563202344', 'masterOrderNo': '10000210738984', 'mtn': '5209717631', 'nsaStackId': 'OM', 'activationStatus': 'Failure', 'cartId': '49dd8006-9840-489d-80d2-1035c7f394f1', 'comboOrder': '569202349', 'paymentStatus': 'Success', 'caseId': 'SOP-1086922738-W01', 'aceOrderType': 'Purchase Service(PS)', 'aceOrderStatus': 'Completed(CO)', 'accountNo': '1', 'preOrder': '0', 'loanNumber': '1469307558', 'visionOrder': None, 'aceOrderNumber': '1051684', 'aceOrderCompletionTime': '23-11-2025 16:35:29', 'aceOrderCustomerType': 'Upgrade Customer(U)', 'broadBandType': None, 'billRegion': 'VW', 'shipmentStatus': 'Completed', 'byod': 'False', 'aceOrderSaleType': 'Purchase(P)', 'channel': 'NETACE', 'orderSaveTime': '23-11-2025 16:32:52', 'shipmentType': 'LOCAL', 'ecpdProfileId': None, 'tradeInDeviceId': None, 'trunkMtn': None, 'tradeInDescription': None, 'portIn': 'Pending', 'clnrStatus': None, 'shipmentMethod': None, 'fraudStatus': 'Success', 'creditStatus': None, 'pendingOrder': False, 'visionOrderStatus': None, 'cassandraOrderStatus': None, 'cidbStatus': None, 'visionStatus': 'C, TC', 'cassandraStatus': None}
            ðŸ” Condition Details:
               Field Path: orderDetails
               Operator: EQUALS
               Actual Value: '1'
               Expected Value: '1'
         âœ… Condition met for rule: get-correction-order-details-success
Next scenario rule {'rule_id': 'RULE_206', 'rule_name': 'b2b-customer-check', 'rule_step_number': 6, 'JSON_PATH_VALUE': 'orderDetails{}.billRegion=VB', 'operator': 'EQUALS', 'expected_value': 'True', 'rule_action': 'CONTINUE', 'rule_next_step': 'RULE_300', 'rule_type': 'API_RESPONSE', 'rule_context': 'RULE_200', 'intent_type': 'ACTIVATION'}
field_pathfield_path ===> orderDetails{}.billRegion=VB
            ðŸ” Condition Details:
               Field Path: orderDetails{}.billRegion=VB
               Operator: EQUALS
               Actual Value: 'False'
               Expected Value: 'True'
         âŒ Condition not met for rule: b2b-customer-check
Finding failure case for22
Finding failure case for  orderDetails{}.billRegion=VB ACTIVATION EQUALS
field_pathfield_path ===> orderDetails{}.portIn
                  ðŸ” Searching for field: orderDetails{}.portIn
                  âŒ Data not found in any API response, treating as length 0
            ðŸ” Condition Details:
               Field Path: orderDetails{}.portIn
               Operator: NOT_EQUALS
               Actual Value: '0'
               Expected Value: 'A'
               DEBUG Check: Actual='0' vs Expected='A'
               DEBUG Result: Is Different? True
         âœ… Condition met for rule: portin-check
ðŸŽ¯ RULE EXECUTION RESULT:
   Result: None
   Status: NO_RESULT
   Message: NO_MESSAGE

ðŸŽ¯ PROCESSING COMPLETE
Status: NO_RESULT
============================================================

ðŸ” --- STARTING DATA EXTRACTION (Rule: Get order info) ---
   ðŸ“‚ Analyzing Context Key: api_result_RULE_200
      âœ… Found 'orderDetails' dictionary.
         -> Raw 'channel' found: 'NETACE'
         -> Raw 'activationStatus' found: 'Failure'
         ðŸŽ¯ CAPTURED CHANNEL_ID: NETACE
         ðŸŽ¯ CAPTURED ACTIVATION_STATUS: Failure
ðŸ” --- DATA EXTRACTION FINISHED ---

ðŸ§ª FINAL VALUES TO INSERT:
   CHANNEL_ID:        'NETACE'
   ACTIVATION_STATUS: 'Failure'
   SOURCE_TYPE_CODE:  ''
   SOURCE_TYPE_VAL:   ''
------------------------------
ðŸ“ LOGGED: PROCESS_COMPLETE for Get order info (Session: SS_20251216_091542_789455d9)
response ==> Dear User, Order processing failed. Please check your order details and try again. If the issue persists, contact customer support.
      INFO   127.0.0.1:63941 - "POST /api/v1/activation HTTP/1.1" 200
      INFO   127.0.0.1:51593 - "GET /gettransactions HTTP/1.1" 404
      INFO   Shutting down
      INFO   Waiting for application shutdown.
      INFO   Application shutdown complete.
      INFO   Finished server process [104024]

(venv) PS C:\Users\salude7\Documents\store-automation-slack_server_nonprod>
